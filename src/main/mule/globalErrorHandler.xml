<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:salesforce-composite="http://www.mulesoft.org/schema/mule/salesforce-composite"
	xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns:s3="http://www.mulesoft.org/schema/mule/s3" 
	xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:email="http://www.mulesoft.org/schema/mule/email"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/email http://www.mulesoft.org/schema/mule/email/current/mule-email.xsd 
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/s3 http://www.mulesoft.org/schema/mule/s3/current/mule-s3.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd
http://www.mulesoft.org/schema/mule/salesforce-composite http://www.mulesoft.org/schema/mule/salesforce-composite/current/mule-salesforce-composite.xsd">
	<error-handler name="global-error-handler" doc:id="dbda4398-3caf-4074-b0aa-0e37fb5c80ef" >
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="c6a7a640-c4af-4c63-897d-c231047e6180" type="SALESFORCE-COMPOSITE:CONNECTIVITY, SALESFORCE-COMPOSITE:RETRY_EXHAUSTED, DB:CONNECTIVITY, DB:RETRY_EXHAUSTED, CONNECTIVITY, RETRY_EXHAUSTED">
			<ee:transform doc:name="email request" doc:id="8c6f7cce-0b49-407e-b8b6-e4ea34eb5d64">
				<ee:message>
					<ee:set-payload resource="dwl/technicalError.dwl" />
				</ee:message>
				<ee:variables />
			</ee:transform>
			<logger level="ERROR" doc:name="error response" doc:id="0c2752df-34f5-40ec-91ec-63279750c040" message="ConnectivityIssue: #[payload]" />
			<email:send doc:id="3139f6b0-df5a-4513-963f-7e3585064cec" config-ref="Email_SMTP" subject="Connectivity Issue" doc:name="email send" toAddresses="#[p('smtp.to') splitBy &quot;,&quot;]">
				<reconnect frequency="${max.frequency}" count="${max.retries}" />
			</email:send>
			<logger level="INFO" doc:name="email response" doc:id="041fe40f-ecf7-4dd3-b2b3-8cdbe174bbd8" message="EmailResponse:#[payload]" />
		</on-error-continue>
		<on-error-continue enableNotifications="true" logException="true" doc:name="On Error Continue" doc:id="84ea1b08-8253-485e-b3b5-fb85e5948ee3" type="ANY" >
			<ee:transform doc:name="error payload" doc:id="e949989b-af0c-4967-b7ed-8305544bdad5" >
				<ee:message >
					<ee:set-payload resource="dwl/technicalError.dwl" />
				</ee:message>
				<ee:variables />
			</ee:transform>
			<logger level="ERROR" doc:name="error response" doc:id="e89ad1e3-323b-4458-9538-78b45b5ef16a" message="#[payload]" />
		</on-error-continue>
	
</error-handler>

</mule>
